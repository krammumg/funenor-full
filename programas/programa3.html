<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Higiene y Hogar — FUNDENOR AQ'AB'AL</title>
  <link rel="stylesheet" href="../css/programas.css">
</head>

<body class="preload">
  <div class="app">
    <aside class="sidebar"></aside>
  <!-- NAVBAR -->
  <header>
    <nav class="navbar">
      <div class="logo">
        <img src="../img/logo.png" alt="Logo FUNDENOR AQAB'AL'">
        <span>FUNDENOR AQ'AB'AL</span>
      </div>
      <ul class="nav-links">
        <li><a href="../index.html">Inicio</a></li>
        <li class="dropdown">
          <a href="#programas">Programas ▾</a>
          <ul class="dropdown-menu">
            <li><a href="programa1.html">Alimentación y Nutrición</a></li>
            <li><a href="programa2.html">Salud</a></li>
            <li><a href="programa3.html">Higiene y Hogar</a></li>
            <li><a href="programa4.html">Educación</a></li>
            <li><a href="programa5.html">Ayuda Humanitaria</a></li>
          </ul>
        </li>
        <li><a href="../donaciones/donaciones.html" class="btn-donar">Donar</a></li>
      </ul>
    </nav>
  </header>

  <main class="main-content">

    <!-- HERO -->
    <section class="hero" style="background-image: url('../img//prog3.png');">
      <div class="hero-content">
        <h1>Higiene y Hogar</h1>
        <p>Promoviendo prácticas de higiene y mejoras en el hogar para un entorno saludable y armonioso.</p>
        <a class="btn" href="#areas">Ver áreas</a>
      </div>
    </section>

    <!-- DESCRIPCIÓN GENERAL -->
    <section class="program-section">
      <div class="program-content">
        <h2>Descripción General</h2>
        <p>
          Enseñamos a las familias a aprovechar los recursos locales mediante ideas ingeniosas que mejoran tanto la higiene como la infraestructura del hogar. Nuestro objetivo es crear un ambiente sano y agradable, promoviendo prácticas que aseguren un entorno limpio y ordenado, fomentando orgullo y propiedad sobre sus hogares.
        </p>
      </div>
    </section>

    <!-- ÁREAS DE TRABAJO -->
    <section id="areas" class="areas-section">
      <h2>Áreas de trabajo</h2>
      <div class="areas-grid">
        <a class="card" href="#higiene"><img src="../img/icons/higiene.png" alt=""><div>Higiene Familiar</div></a>
        <a class="card" href="#infraestructura"><img src="../img/icons/infraestructura.png" alt=""><div>Mejoramiento de Infraestructuras</div></a>
        <a class="card" href="#casa"><img src="../img/icons/casa.png" alt=""><div>Casa Hogar Saludable</div></a>
      </div>
    </section>

    <!-- HIGIENE FAMILIAR -->
    <section id="higiene" class="program-section">
      <div class="program-content">
        <h2>Higiene Familiar</h2>
        <p>
          Abordamos temas de higiene familiar y personal, mejorando la salud mediante buenas prácticas: higiene dental, capilar, lavado de manos, prevención de enfermedades y promoción del bienestar general.
        </p>
      </div>
      <div class="gallery-preview">
        <img src="../img/programa3/higiene1.png" alt="">
        <img src="../img/programa3/higiene2.png" alt="">
        <img src="../img/programa3/higiene3.png" alt="">
        <img src="../img/programa3/higiene4.png" alt="">
      </div>
      <div class="gallery-btn-container">
        <button class="btn-gallery" data-gallery="higiene">Ver galería</button>
      </div>
    </section>

    <!-- MEJORAMIENTO DE INFRAESTRUCTURAS -->
    <section id="infraestructura" class="program-section">
      <div class="program-content">
        <h2>Mejoramiento de Infraestructuras</h2>
        <p>
          Identificamos necesidades de mejora en viviendas y proporcionamos recursos como pilas, tinacos y láminas para duchas o sanitarios. Apoyamos a familias que aplican buenas prácticas, combinando educación con recursos prácticos.
        </p>
      </div>
      <div class="gallery-preview">
        <img src="../img/programa3/infra1.png" alt="">
        <img src="../img/programa3/infra2.png" alt="">
      </div>
      <div class="gallery-btn-container">
        <button class="btn-gallery" data-gallery="infraestructura">Ver galería</button>
      </div>
    </section>

    <!-- CASA HOGAR SALUDABLE -->
    <section id="casa" class="program-section">
      <div class="program-content">
        <h2>Casa Hogar Saludable</h2>
        <p>
          Sensibilizamos sobre limpieza, orden y organización del hogar usando recursos locales. Mejoramos espacios de cocina, dormitorio, duchas y sanitarios, y fomentamos espacios adecuados para animales. Buscamos que las familias adopten prácticas que hagan su hogar más saludable y armonioso.
        </p>
      </div>
      <div class="gallery-preview">
        <img src="../img/programa3/casa1.png" alt="">
        <img src="../img/programa3/casa2.png" alt="">
      </div>
      <div class="gallery-btn-container">
        <button class="btn-gallery" data-gallery="casa">Ver galería</button>
      </div>
    </section>

    <!-- RESULTADOS -->
    <section class="resultados">
      <h2>Resultados al 2024</h2>
      <div class="resultados-grid">
        <div class="resultado-card">
          <img src="../img/icons/infraestructura.png" alt="">
          <h3>500</h3>
          <p>Familias con mejoras en la vivienda</p>
        </div>
      </div>
    </section>

<!-- SECCIÓN DONACIONES -->
<section id="donaciones" class="section section-light">
  <div class="section-content cta-donacion">
    <div class="section-text">
      <h2>¡Únete y Apoya con tu Donación!</h2>
      <p>
        Tu apoyo transforma vidas. Con tu contribución, podemos seguir llevando desarrollo, educación y bienestar
        a las comunidades que más lo necesitan.
      </p>
      <div class="formas-donacion">
        <div class="donacion-card">
          <img src="../img/icons/individual.webp" alt="Donación Individual">
          <h3>Donación Individual</h3>
        </div>
        <div class="donacion-card">
          <img src="../img/icons/empresarial.png" alt="Donación Empresarial">
          <h3>Donación Empresarial</h3>
        </div>
        <div class="donacion-card">
          <img src="../img/icons/causa.png" alt="Donación por Causa">
          <h3>Donación por Causa</h3>
        </div>
      </div>
      <a href="../donaciones/donaciones.html" class="btn btn-donar">¡Dona Ahora!</a>
    </div>
    <div class="section-image">
      <img src="../img/prog3.png" alt="Personas beneficiadas">
    </div>
  </div>
</section>

    <!-- FOOTER -->
  <footer>
  <div class="footer-container">
    <div class="footer-left">
      <img src="../img/logo.png" alt="Logo FUNDENOR AQ'AB'AL" class="footer-logo">
    </div>

    <div class="footer-center">
      <p>&copy; 2025 FUNDENOR AQ'AB'AL — Todos los derechos reservados</p>
      <p class="footer-dev">
        Universidad Mariano Gálvez de Guatemala, Sede Cobán A.V.<br>
        Ingeniería en Sistemas de Información y Ciencias de la Computación — Décimo Ciclo
      </p>
    </div>

    <div class="footer-right">
      <img src="../img/logo_umg.png" alt="Logo UMG" class="footer-logo">
    </div>
  </div>
</footer>
  </main>

  <!-- MODAL PARA GALERÍA -->
  <div id="galleryModal" class="modal">
    <span class="close">&times;</span>
    <img class="modal-content" id="modalImage">
  </div>

  <!-- JS -->
  <script src="../js/sidebar.js"></script>
  <script src="../js/programas.js"></script>
  <script src="../js/auth.js"></script>

  <script>
/* ---------- GALERÍA UNIVERSAL (thumbnails + galerías extra) ---------- */
  (function(){
  // Referencias DOM
  const modal = document.getElementById("galleryModal");
  const modalImg = document.getElementById("modalImage");
  const closeBtn = modal.querySelector(".close");

  // Botones de navegación (se crean una vez)
  const btnPrev = document.createElement("button");
  const btnNext = document.createElement("button");
  btnPrev.className = "modal-nav modal-prev";
  btnNext.className = "modal-nav modal-next";
  btnPrev.setAttribute("aria-label", "Anterior");
  btnNext.setAttribute("aria-label", "Siguiente");
  btnPrev.innerHTML = "◀";
  btnNext.innerHTML = "▶";

  // Estilos mínimos para los botones (se pueden mover a CSS)
  const navStyle = `
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    background: rgba(0,0,0,0.45);
    color: #fff;
    border: none;
    width: 46px;
    height: 46px;
    border-radius: 8px;
    font-size: 1.2rem;
    cursor: pointer;
    z-index: 1100;
  `;
  btnPrev.style.cssText = navStyle + "left: 32px;";
  btnNext.style.cssText = navStyle + "right: 32px;";

  // Añadir botones al modal
  modal.appendChild(btnPrev);
  modal.appendChild(btnNext);

  // Objeto con colecciones "extra" que se cargan cuando se pulsa el botón "Ver galería"
  const galeriasExtra = {
  higiene: [
    "../img/programa3/galeria/20190218_143326.jpg",
    "../img/programa3/galeria/20190424_104840.jpg",
    "../img/programa3/galeria/20190424_105144.jpg",
    "../img/programa3/galeria/20190424_105301.jpg",
    "../img/programa3/galeria/20190424_112135.jpg",
    "../img/programa3/galeria/20190424_112750.jpg",
    "../img/programa3/galeria/20190521_132457.jpg",
    "../img/programa3/galeria/20190924_103228.jpg",
    "../img/programa3/galeria/20190924_120301.jpg",
    "../img/programa3/galeria/20191204_113637.jpg"
  ],

  infraestructura: [
    "../img/programa3/galeria/20200312_094459.jpg",
    "../img/programa3/galeria/20200505_095740.jpg",
    "../img/programa3/galeria/20200505_095922.jpg",
    "../img/programa3/galeria/20200507_145102.jpg",
    "../img/programa3/galeria/20200507_145109.jpg",
    "../img/programa3/galeria/20200916_130641.jpg",
    "../img/programa3/galeria/20200929_133226.jpg",
    "../img/programa3/galeria/20210322_123135.jpg",
    "../img/programa3/galeria/20210322_124449.jpg",
    "../img/programa3/galeria/20210322_124628.jpg"
  ],

  casa: [
    "../img/programa3/galeria/20210416_115515.jpg",
    "../img/programa3/galeria/20210927_174416.jpg",
    "../img/programa3/galeria/20240822_112029.jpg",
    "../img/programa3/galeria/20250526_114421.jpg",
    "../img/programa3/galeria/20250527_084617.jpg",
    "../img/programa3/galeria/242228791_3069433589960442_7426163495387592263_n.jpg",
    "../img/programa3/galeria/DSCN2412.JPG",
    "../img/programa3/galeria/IMG-20250527-WA0019.jpg",
    "../img/programa3/galeria/IMG-20250527-WA0027.jpg",
    "../img/programa3/galeria/IMG-20250527-WA0032.jpg",
    "../img/programa3/galeria/IMG_20210909_095148.jpg",
    "../img/programa3/galeria/PILAS.jpg"
  ]
};

  // Estado de la galería actual
  let currentGallery = []; // array de src
  let currentIndex = 0;

  // Mostrar imagen por índice
  function showImage(index) {
    if (!currentGallery || currentGallery.length === 0) return;
    currentIndex = ((index % currentGallery.length) + currentGallery.length) % currentGallery.length;
    modalImg.src = currentGallery[currentIndex];

    // accesibilidad / atributos
    modalImg.alt = `Imagen ${currentIndex + 1} de ${currentGallery.length}`;

    // ocultar botones si solo hay 1 imagen
    if (currentGallery.length <= 1) {
      btnPrev.style.display = "none";
      btnNext.style.display = "none";
    } else {
      btnPrev.style.display = "";
      btnNext.style.display = "";
    }
  }

  // Abrir modal
  function openModal() {
    modal.style.display = "block";
    document.body.style.overflow = "hidden"; // evita scroll en background
  }

  // Cerrar modal
  function closeModal() {
    modal.style.display = "none";
    document.body.style.overflow = ""; // restaura scroll
  }

  // Handlers prev/next
  btnPrev.addEventListener("click", (e) => {
    e.stopPropagation();
    showImage(currentIndex - 1);
  });
  btnNext.addEventListener("click", (e) => {
    e.stopPropagation();
    showImage(currentIndex + 1);
  });

  // Cerrar con X
  closeBtn.addEventListener("click", () => closeModal());

  // Cerrar al hacer clic fuera de la imagen (en el overlay)
  modal.addEventListener("click", (e) => {
    if (e.target === modal) closeModal();
  });

  // Navegación con teclado: ← → y ESC
  window.addEventListener("keydown", (e) => {
    if (modal.style.display === "block") {
      if (e.key === "ArrowRight") {
        showImage(currentIndex + 1);
      } else if (e.key === "ArrowLeft") {
        showImage(currentIndex - 1);
      } else if (e.key === "Escape") {
        closeModal();
      }
    }
  });

  /* ---------- 1) Comportamiento original: cuando se hace clic en las miniaturas
       se usan las imágenes que ya están en la página (navegación entre ellas). -----*/
  document.querySelectorAll(".gallery-preview img").forEach(img => {
    img.addEventListener("click", (ev) => {
      // Construimos galería a partir de las imágenes existentes en la misma .gallery-preview
      const container = img.closest(".gallery-preview");
      const imgs = Array.from(container.querySelectorAll("img"));
      currentGallery = imgs.map(i => i.src);
      currentIndex = imgs.indexOf(img);
      showImage(currentIndex);
      openModal();
    });
  });

  /* ---------- 2) Comportamiento del botón "Ver galería": carga galeriasExtra ---------- */
  document.querySelectorAll(".btn-gallery").forEach(btn => {
    btn.addEventListener("click", () => {
      const galleryName = btn.dataset.gallery;
      const extra = galeriasExtra[galleryName];
      if (!extra || !extra.length) {
        // Si no hay imágenes extra definidas, caemos en usar las miniaturas de la sección (fallback)
        const section = btn.closest(".program-section") || btn.closest("section");
        const preview = section ? section.querySelector(".gallery-preview") : null;
        if (preview) {
          const imgs = Array.from(preview.querySelectorAll("img"));
          currentGallery = imgs.map(i => i.src);
        } else {
          currentGallery = [];
        }
      } else {
        currentGallery = extra.slice(); // copia array
      }
      currentIndex = 0;
      showImage(currentIndex);
      openModal();
    });
  });

  // Inicial: ocultar botones si modal comienza con display none (ya ocultos por CSS)
  btnPrev.style.display = "none";
  btnNext.style.display = "none";

})(); 
</script>

<script>
document.addEventListener("DOMContentLoaded", async () => {
  const role = localStorage.getItem("role");
  const body = document.body;
  const sidebar = document.querySelector(".sidebar");

  // Mostrar sidebar sólo a admin o becasManager
  if (role === "admin" || role === "becasManager") {
    body.classList.add("with-sidebar");

    try {
      // Si tienes un archivo HTML del sidebar, se puede cargar aquí
      // const res = await fetch("/components/sidebar.html");
      // sidebar.innerHTML = await res.text();

      // O si se genera con JS dinámico, puedes dejarlo vacío y dejar que sidebar.js lo renderice
    } catch (err) {
      console.error("Error cargando sidebar:", err);
    }
  } else {
    if (sidebar) sidebar.remove();
  }

  // ✅ Finalmente, mostramos el contenido ya sin parpadeo
  body.classList.remove("preload");
});
</script>

</body>
</html>
