<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Salud — FUNDENOR AQ'AB'AL</title>
  <link rel="stylesheet" href="../css/programas.css">
</head>

<body class="preload">
  <div class="app">
    <aside class="sidebar"></aside>

  <!-- NAVBAR -->
  <header>
    <nav class="navbar">
      <div class="logo">
        <img src="../img/logo.png" alt="Logo FUNDENOR AQAB'AL'">
        <span>FUNDENOR AQ'AB'AL</span>
      </div>
      <ul class="nav-links">
        <li><a href="../index.html">Inicio</a></li>
        <li class="dropdown">
          <a href="#programas">Programas ▾</a>
          <ul class="dropdown-menu">
            <li><a href="programa1.html">Alimentación y Nutrición</a></li>
            <li><a href="programa2.html">Salud</a></li>
            <li><a href="programa3.html">Higiene y Hogar</a></li>
            <li><a href="programa4.html">Educación</a></li>
            <li><a href="programa5.html">Ayuda Humanitaria</a></li>
          </ul>
        </li>
        <li><a href="../donaciones/donaciones.html" class="btn-donar">Donar</a></li>
      </ul>
    </nav>
  </header>

  <main class="main-content">

    <!-- HERO -->
    <section class="hero" style="background-image: url('../img/prog2.png');">
      <div class="hero-content">
        <h1>Salud</h1>
        <p>Buscamos el bienestar físico de las familias mediante acceso a servicios médicos, agua segura y planificación familiar.</p>
        <a class="btn" href="#areas">Ver áreas</a>
      </div>
    </section>

    <!-- DESCRIPCIÓN GENERAL -->
    <section class="program-section">
      <div class="program-content">
        <h2>Descripción General</h2>
        <p>
          Nos enfocamos en proporcionar acceso a servicios médicos esenciales, garantizar agua potable segura 
          y promover la planificación familiar. Facilitamos métodos de planificación familiar y capacitación 
          en salud preventiva para mejorar la calidad de vida de las comunidades.
        </p>
      </div>
    </section>

    <!-- ÁREAS DE TRABAJO -->
    <section id="areas" class="areas-section">
      <h2>Áreas de trabajo</h2>
      <div class="areas-grid">
        <a class="card" href="#jornada"><img src="../img/icons/jornada.png" alt=""><div>Jornadas Médicas</div></a>
        <a class="card" href="#sexual"><img src="../img/icons/sexual.png" alt=""><div>Salud Sexual Reproductiva</div></a>
        <a class="card" href="#filtros"><img src="../img/icons/filtros.png" alt=""><div>Filtros de Agua</div></a>
      </div>
    </section>

    <!-- JORNADAS MÉDICAS -->
    <section id="jornada" class="program-section">
      <div class="program-content">
        <h2>Jornadas Médicas</h2>
        <p>
          Realizamos jornadas médicas en comunidades rurales, ofreciendo atención y medicamentos gratuitos. 
          Contamos con médicos especializados en ginecología, pediatría, odontología y medicina general, 
          asegurando un acceso integral a la salud.
        </p>
      </div>
      <div class="gallery-preview">
        <img src="../img/programa2/jornada1.png" alt="">
        <img src="../img/programa2/jornada2.png" alt="">
        <img src="../img/programa2/jornada3.png" alt="">
        <img src="../img/programa2/jornada4.png" alt="">
      </div>
      <div class="gallery-btn-container">
        <button class="btn-gallery" data-gallery="jornada">Ver galería</button>
      </div>
    </section>

    <!-- SALUD SEXUAL REPRODUCTIVA -->
    <section id="sexual" class="program-section">
      <div class="program-content">
        <h2>Salud Sexual Reproductiva</h2>
        <p>
          Brindamos educación sobre salud sexual y métodos anticonceptivos, empoderando a las mujeres y orientando 
          a las familias para que tomen decisiones informadas sobre la planificación familiar y la salud reproductiva.
        </p>
      </div>
      <div class="gallery-preview">
        <img src="../img/programa2/sexual1.png" alt="">
        <img src="../img/programa2/sexual2.png" alt="">
        <img src="../img/programa2/sexual3.png" alt="">
        <img src="../img/programa2/sexual4.png" alt="">
      </div>
      <div class="gallery-btn-container">
        <button class="btn-gallery" data-gallery="sexual">Ver galería</button>
      </div>
    </section>

    <!-- FILTROS DE AGUA -->
    <section id="filtros" class="program-section">
      <div class="program-content">
        <h2>Filtros de Agua</h2>
        <p>
          Proveemos filtros domésticos y capacitamos en su uso correcto, garantizando agua potable segura y mejorando 
          la salud de las familias.
        </p>
      </div>
      <div class="gallery-preview">
        <img src="../img/programa2/filtros1.png" alt="">
        <img src="../img/programa2/filtros2.png" alt="">
        <img src="../img/programa2/filtros3.png" alt="">
        <img src="../img/programa2/filtros4.png" alt="">
      </div>
      <div class="gallery-btn-container">
        <button class="btn-gallery" data-gallery="filtros">Ver galería</button>
      </div>
    </section>

    <!-- RESULTADOS -->
    <section class="resultados">
      <h2>Resultados al 2024</h2>
      <div class="resultados-grid">
        <div class="resultado-card">
          <img src="../img/icons/jornada.png" alt="">
          <h3>18</h3>
          <p>Jornadas médicas rurales</p>
        </div>
        <div class="resultado-card">
          <img src="../img/icons/sexual.png" alt="">
          <h3>300</h3>
          <p>Mujeres con acceso a educación sexual</p>
        </div>
        <div class="resultado-card">
          <img src="../img/icons/filtros.png" alt="">
          <h3>212</h3>
          <p>Familias con filtro para purificar agua</p>
        </div>
      </div>
    </section>

    <!-- SECCIÓN DONACIONES -->
<section id="donaciones" class="section section-light">
  <div class="section-content cta-donacion">
    <div class="section-text">
      <h2>¡Únete y Apoya con tu Donación!</h2>
      <p>
        Tu apoyo transforma vidas. Con tu contribución, podemos seguir llevando desarrollo, educación y bienestar
        a las comunidades que más lo necesitan.
      </p>
      <div class="formas-donacion">
        <div class="donacion-card">
          <img src="../img/icons/individual.webp" alt="Donación Individual">
          <h3>Donación Individual</h3>
        </div>
        <div class="donacion-card">
          <img src="../img/icons/empresarial.png" alt="Donación Empresarial">
          <h3>Donación Empresarial</h3>
        </div>
        <div class="donacion-card">
          <img src="../img/icons/causa.png" alt="Donación por Causa">
          <h3>Donación por Causa</h3>
        </div>
      </div>
      <a href="../donaciones/donaciones.html" class="btn btn-donar">¡Dona Ahora!</a>
    </div>
    <div class="section-image">
      <img src="../img/prog2.png" alt="Personas beneficiadas">
    </div>
  </div>
</section>

    <!-- FOOTER -->
  <footer>
  <div class="footer-container">
    <div class="footer-left">
      <img src="../img/logo.png" alt="Logo FUNDENOR AQ'AB'AL" class="footer-logo">
    </div>

    <div class="footer-center">
      <p>&copy; 2025 FUNDENOR AQ'AB'AL — Todos los derechos reservados</p>
      <p class="footer-dev">
        Universidad Mariano Gálvez de Guatemala, Sede Cobán A.V.<br>
        Ingeniería en Sistemas de Información y Ciencias de la Computación — Décimo Ciclo
      </p>
    </div>

    <div class="footer-right">
      <img src="../img/logo_umg.png" alt="Logo UMG" class="footer-logo">
    </div>
  </div>
</footer>
  </main>

<!-- MODAL PARA GALERÍA -->
  <div id="galleryModal" class="modal">
    <span class="close">&times;</span>
    <img class="modal-content" id="modalImage">
  </div>

  <!-- JS -->
  <script src="../js/sidebar.js"></script>
  <script src="../js/programas.js"></script>
  <script src="../js/auth.js"></script>
  
  <script>
/* ---------- GALERÍA UNIVERSAL (thumbnails + galerías extra) ---------- */
  (function(){
  // Referencias DOM
  const modal = document.getElementById("galleryModal");
  const modalImg = document.getElementById("modalImage");
  const closeBtn = modal.querySelector(".close");

  // Botones de navegación (se crean una vez)
  const btnPrev = document.createElement("button");
  const btnNext = document.createElement("button");
  btnPrev.className = "modal-nav modal-prev";
  btnNext.className = "modal-nav modal-next";
  btnPrev.setAttribute("aria-label", "Anterior");
  btnNext.setAttribute("aria-label", "Siguiente");
  btnPrev.innerHTML = "◀";
  btnNext.innerHTML = "▶";

  // Estilos mínimos para los botones (se pueden mover a CSS)
  const navStyle = `
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    background: rgba(0,0,0,0.45);
    color: #fff;
    border: none;
    width: 46px;
    height: 46px;
    border-radius: 8px;
    font-size: 1.2rem;
    cursor: pointer;
    z-index: 1100;
  `;
  btnPrev.style.cssText = navStyle + "left: 32px;";
  btnNext.style.cssText = navStyle + "right: 32px;";

  // Añadir botones al modal
  modal.appendChild(btnPrev);
  modal.appendChild(btnNext);

  // Objeto con colecciones "extra" que se cargan cuando se pulsa el botón "Ver galería"
  const galeriasExtra = {
    jornada: [
    "../img/programa2/galeria/20200106_084558.jpg",
    "../img/programa2/galeria/20200108_102216.jpg",
    "../img/programa2/galeria/20200113_120103.jpg",
    "../img/programa2/galeria/20200114_143300.jpg",
    "../img/programa2/galeria/20200115_090155.jpg",
    "../img/programa2/galeria/20200916_123814.jpg",
    "../img/programa2/galeria/20230815_105325.jpg",
    "../img/programa2/galeria/20230815_144058.jpg",
    "../img/programa2/galeria/20250112_084247.jpg",
    "../img/programa2/galeria/20250114_083002.jpg"
  ],
  sexual: [
    "../img/programa2/galeria/20250406_165031.jpg",
    "../img/programa2/galeria/20250407_100037.jpg",
    "../img/programa2/galeria/20250407_101242.jpg",
    "../img/programa2/galeria/20250407_102244.jpg",
    "../img/programa2/galeria/20250408_100814.jpg",
    "../img/programa2/galeria/20250408_101226.jpg",
    "../img/programa2/galeria/20250409_101531.jpg",
    "../img/programa2/galeria/20250410_103603.jpg",
    "../img/programa2/galeria/20250411_091054.jpg",
    "../img/programa2/galeria/20250411_092538.jpg"
  ],
  filtros: [
    "../img/programa2/galeria/20250411_093033.jpg",
    "../img/programa2/galeria/20250411_105138.jpg",
    "../img/programa2/galeria/Imagen de WhatsApp 2022-11-14 a las 10.48.01.jpg",
    "../img/programa2/galeria/Imagen de WhatsApp 2022-11-14 a las 10.48.02.jpg",
    "../img/programa2/galeria/Imagen de WhatsApp 2022-11-14 a las 10.48.04.jpg",
    "../img/programa2/galeria/IMG_20221004_112144.jpg",
    "../img/programa2/galeria/IMG_20221004_112237.jpg",
    "../img/programa2/galeria/IMG_20221004_112329.jpg",
    "../img/programa2/galeria/IMG_20221004_113206.jpg",
    "../img/programa2/galeria/IMG_20221005_121714.jpg"
  ]
  };

  // Estado de la galería actual
  let currentGallery = []; // array de src
  let currentIndex = 0;

  // Mostrar imagen por índice
  function showImage(index) {
    if (!currentGallery || currentGallery.length === 0) return;
    currentIndex = ((index % currentGallery.length) + currentGallery.length) % currentGallery.length;
    modalImg.src = currentGallery[currentIndex];

    // accesibilidad / atributos
    modalImg.alt = `Imagen ${currentIndex + 1} de ${currentGallery.length}`;

    // ocultar botones si solo hay 1 imagen
    if (currentGallery.length <= 1) {
      btnPrev.style.display = "none";
      btnNext.style.display = "none";
    } else {
      btnPrev.style.display = "";
      btnNext.style.display = "";
    }
  }

  // Abrir modal
  function openModal() {
    modal.style.display = "block";
    document.body.style.overflow = "hidden"; // evita scroll en background
  }

  // Cerrar modal
  function closeModal() {
    modal.style.display = "none";
    document.body.style.overflow = ""; // restaura scroll
  }

  // Handlers prev/next
  btnPrev.addEventListener("click", (e) => {
    e.stopPropagation();
    showImage(currentIndex - 1);
  });
  btnNext.addEventListener("click", (e) => {
    e.stopPropagation();
    showImage(currentIndex + 1);
  });

  // Cerrar con X
  closeBtn.addEventListener("click", () => closeModal());

  // Cerrar al hacer clic fuera de la imagen (en el overlay)
  modal.addEventListener("click", (e) => {
    if (e.target === modal) closeModal();
  });

  // Navegación con teclado: ← → y ESC
  window.addEventListener("keydown", (e) => {
    if (modal.style.display === "block") {
      if (e.key === "ArrowRight") {
        showImage(currentIndex + 1);
      } else if (e.key === "ArrowLeft") {
        showImage(currentIndex - 1);
      } else if (e.key === "Escape") {
        closeModal();
      }
    }
  });

  /* ---------- 1) Comportamiento original: cuando se hace clic en las miniaturas
       se usan las imágenes que ya están en la página (navegación entre ellas). -----*/
  document.querySelectorAll(".gallery-preview img").forEach(img => {
    img.addEventListener("click", (ev) => {
      // Construimos galería a partir de las imágenes existentes en la misma .gallery-preview
      const container = img.closest(".gallery-preview");
      const imgs = Array.from(container.querySelectorAll("img"));
      currentGallery = imgs.map(i => i.src);
      currentIndex = imgs.indexOf(img);
      showImage(currentIndex);
      openModal();
    });
  });

  /* ---------- 2) Comportamiento del botón "Ver galería": carga galeriasExtra ---------- */
  document.querySelectorAll(".btn-gallery").forEach(btn => {
    btn.addEventListener("click", () => {
      const galleryName = btn.dataset.gallery;
      const extra = galeriasExtra[galleryName];
      if (!extra || !extra.length) {
        // Si no hay imágenes extra definidas, caemos en usar las miniaturas de la sección (fallback)
        const section = btn.closest(".program-section") || btn.closest("section");
        const preview = section ? section.querySelector(".gallery-preview") : null;
        if (preview) {
          const imgs = Array.from(preview.querySelectorAll("img"));
          currentGallery = imgs.map(i => i.src);
        } else {
          currentGallery = [];
        }
      } else {
        currentGallery = extra.slice(); // copia array
      }
      currentIndex = 0;
      showImage(currentIndex);
      openModal();
    });
  });

  // Inicial: ocultar botones si modal comienza con display none (ya ocultos por CSS)
  btnPrev.style.display = "none";
  btnNext.style.display = "none";

})(); 
</script>

<script>
document.addEventListener("DOMContentLoaded", async () => {
  const role = localStorage.getItem("role");
  const body = document.body;
  const sidebar = document.querySelector(".sidebar");

  // Mostrar sidebar sólo a admin o becasManager
  if (role === "admin" || role === "becasManager") {
    body.classList.add("with-sidebar");

    try {
      // Si tienes un archivo HTML del sidebar, se puede cargar aquí
      // const res = await fetch("/components/sidebar.html");
      // sidebar.innerHTML = await res.text();

      // O si se genera con JS dinámico, puedes dejarlo vacío y dejar que sidebar.js lo renderice
    } catch (err) {
      console.error("Error cargando sidebar:", err);
    }
  } else {
    if (sidebar) sidebar.remove();
  }

  // ✅ Finalmente, mostramos el contenido ya sin parpadeo
  body.classList.remove("preload");
});
</script>

</body>
</html>
