<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Alimentación y Nutrición — FUNDENOR AQ'AB'AL</title>
  <link rel="stylesheet" href="../css/programas.css">
</head>

<body class="preload">
  <div class="app">
    <aside class="sidebar"></aside>

  <header>
    <nav class="navbar">
      <div class="logo">
        <img src="../img/logo.png" alt="Logo FUNDENOR AQAB'AL'">
        <span>FUNDENOR AQ'AB'AL</span>
      </div>
      <ul class="nav-links">
        <li><a href="../index.html">Inicio</a></li>
        <li class="dropdown">
          <a href="#programas">Programas ▾</a>
          <ul class="dropdown-menu">
            <li><a href="programa1.html">Alimentación y Nutrición</a></li>
            <li><a href="programa2.html">Salud</a></li>
            <li><a href="programa3.html">Higiene y Hogar</a></li>
            <li><a href="programa4.html">Educación</a></li>
            <li><a href="programa5.html">Ayuda Humanitaria</a></li>
          </ul>
        </li>
        <li><a href="../donaciones/donaciones.html" class="btn-donar">Donar</a></li>
      </ul>
    </nav>
  </header>

  <main class="main-content content-with-sidebar">

    <!-- HERO -->
    <section class="hero" style="background-image: url('../img/prog1.png');">
      <div class="hero-content">
        <h1>Alimentación y Nutrición</h1>
        <p>Promoviendo la seguridad alimentaria, la agrobiodiversidad y prácticas saludables en las comunidades.</p>
        <a class="btn" href="#areas">Ver áreas</a>
      </div>
    </section>

    <!-- DESCRIPCIÓN GENERAL -->
    <section class="program-section">
      <div class="program-content">
        <h2>Descripción General</h2>
        <p>
          A través de la implementación de 5 escuelas comunitarias, buscamos asegurar la disponibilidad de alimentos saludables
          mediante la producción sostenible. Promovemos el uso de la agrobiodiversidad local y combinamos saberes ancestrales con
          conocimientos técnico-científicos. También educamos a las familias para que elijan y preparen alimentos saludables,
          combatiendo la desnutrición y mejorando la salud.
        </p>
      </div>
    </section>

    <!-- ÁREAS DE TRABAJO -->
    <section id="areas" class="areas-section">
      <h2>Áreas de trabajo</h2>
      <div class="areas-grid">
        <a class="card" href="#huertos"><img src="../img/icons/huertos.png" alt=""><div>Huertos Familiares</div></a>
        <a class="card" href="#etnoveterinaria"><img src="../img/icons/etnoveterinaria.png" alt=""><div>Etnoveterinaria</div></a>
        <a class="card" href="#sensibilizacion"><img src="../img/icons/nutricion.png" alt=""><div>Sensibilización Nutricional</div></a>
        <a class="card" href="#recuperacion"><img src="../img/icons/recuperacion.png" alt=""><div>Recuperación Nutricional</div></a>
        <a class="card" href="#transformacion"><img src="../img/icons/transformacion.png" alt=""><div>Transformación de alimentos</div></a>
      </div>
    </section>

    <!-- HUERTOS FAMILIARES -->
    <section id="huertos" class="program-section">
      <div class="program-content">
        <h2>Huertos Familiares</h2>
        <p>
          Promovemos el bienestar familiar al transformar los patios de las casas en huertos, asegurando el acceso a alimentos
          frescos, variados y nutritivos mediante prácticas agroecológicas. Estos huertos no solo proporcionan alimentos, sino
          que también sirven como espacios para la integración familiar, impulsan la economía local y fomentan el intercambio
          de conocimientos dentro de la comunidad.
        </p>
      </div>
      <div class="gallery-preview">
        <img src="../img/programa1/huertos1.png" alt="">
        <img src="../img/programa1/huertos2.png" alt="">
        <img src="../img/programa1/huertos3.png" alt="">
        <img src="../img/programa1/huertos4.png" alt="">
      </div>
      <div class="gallery-btn-container">
        <button class="btn-gallery" data-gallery="huertos">Ver galería</button>
      </div>
    </section>

    <!-- ETNOVETERINARIA -->
    <section id="etnoveterinaria" class="program-section">
      <div class="program-content">
        <h2>Etnoveterinaria</h2>
        <p>
          Promovemos la gestión sostenible y adecuada de aves de corral (como gallinas, gallos y chompipes) para asegurar el
          acceso a proteínas animales a través de huevos y carne. Asimismo, los excedentes pueden convertirse en una fuente
          adicional de ingresos para la familia.
        </p>
      </div>
      <div class="gallery-preview">
        <img src="../img/programa1/etno1.png" alt="">
        <img src="../img/programa1/etno2.png" alt="">
        <img src="../img/programa1/etno3.png" alt="">
        <img src="../img/programa1/etno4.png" alt="">
      </div>
      <div class="gallery-btn-container">
        <button class="btn-gallery" data-gallery="etnoveterinaria">Ver galería</button>
      </div>
    </section>

    <!-- SENSIBILIZACIÓN NUTRICIONAL -->
    <section id="sensibilizacion" class="program-section">
      <div class="program-content">
        <h2>Sensibilización Nutricional</h2>
        <p>
          Trabajamos en la prevención de la desnutrición a través de la formación y sensibilización sobre las causas y efectos
          de la inseguridad alimentaria. Enseñamos sobre nutrición equilibrada y fomentamos prácticas alimentarias adecuadas,
          empoderando a las familias para mejorar su dieta y asegurar una mejor salud y bienestar.
        </p>
      </div>
      <div class="gallery-preview">
        <img src="../img/programa1/sensi1.png" alt="">
        <img src="../img/programa1/sensi2.png" alt="">
        <img src="../img/programa1/sensi3.png" alt="">
        <img src="../img/programa1/sensi4.png" alt="">
      </div>
      <div class="gallery-btn-container">
        <button class="btn-gallery" data-gallery="sensibilizacion">Ver galería</button>
      </div>
    </section>

    <!-- RECUPERACIÓN NUTRICIONAL -->
    <section id="recuperacion" class="program-section">
      <div class="program-content">
        <h2>Recuperación Nutricional</h2>
        <p>
          Realizamos control y monitoreo periódico del peso y la talla de niños menores de 5 años, con el objetivo de detectar
          y prevenir casos de desnutrición. Cuando identificamos a un niño con desnutrición, le brindamos un seguimiento integral
          que incluye educación nutricional y la entrega de alimentos complementarios para apoyar su recuperación.
        </p>
      </div>
      <div class="gallery-preview">
        <img src="../img/programa1/recup1.png" alt="">
        <img src="../img/programa1/recup2.png" alt="">
        <img src="../img/programa1/recup3.png" alt="">
        <img src="../img/programa1/recup4.png" alt="">
      </div>
      <div class="gallery-btn-container">
        <button class="btn-gallery" data-gallery="recuperacion">Ver galería</button>
      </div>
    </section>

    <!-- TRANSFORMACIÓN DE ALIMENTOS -->
    <section id="transformacion" class="program-section">
      <div class="program-content">
        <h2>Transformación de Alimentos</h2>
        <p>
          Enseñamos a los grupos de mujeres a preparar los productos que obtienen de sus huertos familiares. Nuestro objetivo es
          que conozcan diversas maneras de crear comidas ricas, sanas y nutritivas para sus hijos. A través de talleres y sesiones
          prácticas, promovemos el uso de ingredientes frescos y locales, asegurando una alimentación balanceada y deliciosa para
          sus familias.
        </p>
      </div>
      <div class="gallery-preview">
        <img src="../img/programa1/trans1.png" alt="">
        <img src="../img/programa1/trans2.png" alt="">
        <img src="../img/programa1/trans3.png" alt="">
        <img src="../img/programa1/trans4.png" alt="">
      </div>
      <div class="gallery-btn-container">
        <button class="btn-gallery" data-gallery="transformacion">Ver galería</button>
      </div>
    </section>

    <!-- RESULTADOS -->
    <section class="resultados">
      <h2>Resultados al 2024</h2>
      <div class="resultados-grid">
        <div class="resultado-card">
          <img src="../img/icons/huertos.png" alt="">
          <h3>1500</h3>
          <p>Familias con huertos familiares</p>
        </div>
        <div class="resultado-card">
          <img src="../img/icons/recuperacion.png" alt="">
          <h3>245</h3>
          <p>Niños en control y recuperamiento nutricional</p>
        </div>
      </div>
    </section>

<!-- SECCIÓN DONACIONES -->
<section id="donaciones" class="section section-light">
  <div class="section-content cta-donacion">
    <div class="section-text">
      <h2>¡Únete y Apoya con tu Donación!</h2>
      <p>
        Tu apoyo transforma vidas. Con tu contribución, podemos seguir llevando desarrollo, educación y bienestar
        a las comunidades que más lo necesitan.
      </p>
      <div class="formas-donacion">
        <div class="donacion-card">
          <img src="../img/icons/individual.webp" alt="Donación Individual">
          <h3>Donación Individual</h3>
        </div>
        <div class="donacion-card">
          <img src="../img/icons/empresarial.png" alt="Donación Empresarial">
          <h3>Donación Empresarial</h3>
        </div>
        <div class="donacion-card">
          <img src="../img/icons/causa.png" alt="Donación por Causa">
          <h3>Donación por Causa</h3>
        </div>
      </div>
      <a href="../donaciones/donaciones.html" class="btn btn-donar">¡Dona Ahora!</a>
    </div>
    <div class="section-image">
      <img src="../img/prog1.png" alt="Personas beneficiadas">
    </div>
  </div>
</section>

    <!-- FOOTER -->
  <footer>
  <div class="footer-container">
    <div class="footer-left">
      <img src="../img/logo.png" alt="Logo FUNDENOR AQ'AB'AL" class="footer-logo">
    </div>

    <div class="footer-center">
      <p>&copy; 2025 FUNDENOR AQ'AB'AL — Todos los derechos reservados</p>
      <p class="footer-dev">
        Universidad Mariano Gálvez de Guatemala, Sede Cobán A.V.<br>
        Ingeniería en Sistemas de Información y Ciencias de la Computación — Décimo Ciclo
      </p>
    </div>

    <div class="footer-right">
      <img src="../img/logo_umg.png" alt="Logo UMG" class="footer-logo">
    </div>
  </div>
</footer>
  </main>

  <!-- MODAL PARA GALERÍA -->
  <div id="galleryModal" class="modal">
    <span class="close">&times;</span>
    <img class="modal-content" id="modalImage">
  </div>

  <!-- JS -->
  <script src="../js/sidebar.js"></script>
  <script src="../js/programas.js"></script>
  <script src="../js/auth.js"></script>

<script>
/* ---------- GALERÍA UNIVERSAL (thumbnails + galerías extra) ---------- */
  (function(){
  // Referencias DOM
  const modal = document.getElementById("galleryModal");
  const modalImg = document.getElementById("modalImage");
  const closeBtn = modal.querySelector(".close");

  // Botones de navegación (se crean una vez)
  const btnPrev = document.createElement("button");
  const btnNext = document.createElement("button");
  btnPrev.className = "modal-nav modal-prev";
  btnNext.className = "modal-nav modal-next";
  btnPrev.setAttribute("aria-label", "Anterior");
  btnNext.setAttribute("aria-label", "Siguiente");
  btnPrev.innerHTML = "◀";
  btnNext.innerHTML = "▶";

  // Estilos mínimos para los botones (se pueden mover a CSS)
  const navStyle = `
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    background: rgba(0,0,0,0.45);
    color: #fff;
    border: none;
    width: 46px;
    height: 46px;
    border-radius: 8px;
    font-size: 1.2rem;
    cursor: pointer;
    z-index: 1100;
  `;
  btnPrev.style.cssText = navStyle + "left: 32px;";
  btnNext.style.cssText = navStyle + "right: 32px;";

  // Añadir botones al modal
  modal.appendChild(btnPrev);
  modal.appendChild(btnNext);

  // Objeto con colecciones "extra" que se cargan cuando se pulsa el botón "Ver galería"
  const galeriasExtra = {
  huertos: [
    "../img/programa1/galeria/20190516_092015.jpg",
    "../img/programa1/galeria/20191009_081544.jpg",
    "../img/programa1/galeria/20191121_101632.jpg",
    "../img/programa1/galeria/20200304_081327.jpg",
    "../img/programa1/galeria/20200824_124715.jpg",
    "../img/programa1/galeria/20200824_125807.jpg",
    "../img/programa1/galeria/20200824_132334.jpg",
    "../img/programa1/galeria/20200916_131445.jpg",
    "../img/programa1/galeria/20200916_131508.jpg",
    "../img/programa1/galeria/20200922_101600.jpg",
    "../img/programa1/galeria/20200922_111548 - copia.jpg"
  ],
  etnoveterinaria: [
    "../img/programa1/galeria/20200922_111905.jpg",
    "../img/programa1/galeria/20200922_111936.jpg",
    "../img/programa1/galeria/20200922_112910.jpg",
    "../img/programa1/galeria/20200922_112928.jpg",
    "../img/programa1/galeria/20200922_113021.jpg",
    "../img/programa1/galeria/20200922_113437.jpg",
    "../img/programa1/galeria/20210309_091927.jpg",
    "../img/programa1/galeria/20210311_145550.jpg",
    "../img/programa1/galeria/20210322_100303.jpg",
    "../img/programa1/galeria/20210322_100550.jpg",
    "../img/programa1/galeria/20210322_103911.jpg"
  ],
  sensibilizacion: [
    "../img/programa1/galeria/20210322_125046.jpg",
    "../img/programa1/galeria/20220204_104316.jpg",
    "../img/programa1/galeria/20220708_095308.jpg",
    "../img/programa1/galeria/20240625_143503.jpg",
    "../img/programa1/galeria/20240625_144731.jpg",
    "../img/programa1/galeria/20240822_105250.jpg",
    "../img/programa1/galeria/20240822_110504.jpg",
    "../img/programa1/galeria/20240822_111420.jpg",
    "../img/programa1/galeria/20240822_113928.jpg",
    "../img/programa1/galeria/20240822_114130.jpg",
    "../img/programa1/galeria/20240822_114145.jpg"
  ],
  recuperacion: [
    "../img/programa1/galeria/20240822_140328.jpg",
    "../img/programa1/galeria/20240822_140338.jpg",
    "../img/programa1/galeria/20250526_112543.jpg",
    "../img/programa1/galeria/20250526_113105.jpg",
    "../img/programa1/galeria/DSC04360.JPG",
    "../img/programa1/galeria/DSC04401.JPG",
    "../img/programa1/galeria/DSC04523.JPG",
    "../img/programa1/galeria/IMG-20250520-WA0002.jpg",
    "../img/programa1/galeria/IMG_20210909_132647_1.jpg",
    "../img/programa1/galeria/IMG_20211206_113603.jpg",
    "../img/programa1/galeria/IMG_20220118_101646.jpg"
  ],
  transformacion: [
    "../img/programa1/galeria/IMG_20220208_085857.jpg",
    "../img/programa1/galeria/IMG_20220224_120114.jpg",
    "../img/programa1/galeria/IMG_20220315_103940.jpg",
    "../img/programa1/galeria/IMG_20220315_104141.jpg",
    "../img/programa1/galeria/IMG_20220315_104307.jpg",
    "../img/programa1/galeria/IMG_20220315_104508.jpg",
    "../img/programa1/galeria/IMG_20220315_104553.jpg",
    "../img/programa1/galeria/IMG_20220315_104705.jpg",
    "../img/programa1/galeria/IMG_20220719_161741.jpg",
    "../img/programa1/galeria/IMG_20221019_160900.jpg",
    "../img/programa1/galeria/IMG_20221104_100529.jpg"
  ]
};

  // Estado de la galería actual
  let currentGallery = []; // array de src
  let currentIndex = 0;

  // Mostrar imagen por índice
  function showImage(index) {
    if (!currentGallery || currentGallery.length === 0) return;
    currentIndex = ((index % currentGallery.length) + currentGallery.length) % currentGallery.length;
    modalImg.src = currentGallery[currentIndex];

    // accesibilidad / atributos
    modalImg.alt = `Imagen ${currentIndex + 1} de ${currentGallery.length}`;

    // ocultar botones si solo hay 1 imagen
    if (currentGallery.length <= 1) {
      btnPrev.style.display = "none";
      btnNext.style.display = "none";
    } else {
      btnPrev.style.display = "";
      btnNext.style.display = "";
    }
  }

  // Abrir modal
  function openModal() {
    modal.style.display = "block";
    document.body.style.overflow = "hidden"; // evita scroll en background
  }

  // Cerrar modal
  function closeModal() {
    modal.style.display = "none";
    document.body.style.overflow = ""; // restaura scroll
  }

  // Handlers prev/next
  btnPrev.addEventListener("click", (e) => {
    e.stopPropagation();
    showImage(currentIndex - 1);
  });
  btnNext.addEventListener("click", (e) => {
    e.stopPropagation();
    showImage(currentIndex + 1);
  });

  // Cerrar con X
  closeBtn.addEventListener("click", () => closeModal());

  // Cerrar al hacer clic fuera de la imagen (en el overlay)
  modal.addEventListener("click", (e) => {
    if (e.target === modal) closeModal();
  });

  // Navegación con teclado: ← → y ESC
  window.addEventListener("keydown", (e) => {
    if (modal.style.display === "block") {
      if (e.key === "ArrowRight") {
        showImage(currentIndex + 1);
      } else if (e.key === "ArrowLeft") {
        showImage(currentIndex - 1);
      } else if (e.key === "Escape") {
        closeModal();
      }
    }
  });

  /* ---------- 1) Comportamiento original: cuando se hace clic en las miniaturas
       se usan las imágenes que ya están en la página (navegación entre ellas). -----*/
  document.querySelectorAll(".gallery-preview img").forEach(img => {
    img.addEventListener("click", (ev) => {
      // Construimos galería a partir de las imágenes existentes en la misma .gallery-preview
      const container = img.closest(".gallery-preview");
      const imgs = Array.from(container.querySelectorAll("img"));
      currentGallery = imgs.map(i => i.src);
      currentIndex = imgs.indexOf(img);
      showImage(currentIndex);
      openModal();
    });
  });

  /* ---------- 2) Comportamiento del botón "Ver galería": carga galeriasExtra ---------- */
  document.querySelectorAll(".btn-gallery").forEach(btn => {
    btn.addEventListener("click", () => {
      const galleryName = btn.dataset.gallery;
      const extra = galeriasExtra[galleryName];
      if (!extra || !extra.length) {
        // Si no hay imágenes extra definidas, caemos en usar las miniaturas de la sección (fallback)
        const section = btn.closest(".program-section") || btn.closest("section");
        const preview = section ? section.querySelector(".gallery-preview") : null;
        if (preview) {
          const imgs = Array.from(preview.querySelectorAll("img"));
          currentGallery = imgs.map(i => i.src);
        } else {
          currentGallery = [];
        }
      } else {
        currentGallery = extra.slice(); // copia array
      }
      currentIndex = 0;
      showImage(currentIndex);
      openModal();
    });
  });

  // Inicial: ocultar botones si modal comienza con display none (ya ocultos por CSS)
  btnPrev.style.display = "none";
  btnNext.style.display = "none";

})(); 
</script>

<script>
document.addEventListener("DOMContentLoaded", async () => {
  const role = localStorage.getItem("role");
  const body = document.body;
  const sidebar = document.querySelector(".sidebar");

  // Mostrar sidebar sólo a admin o becasManager
  if (role === "admin" || role === "becasManager") {
    body.classList.add("with-sidebar");

    try {
      // Si tienes un archivo HTML del sidebar, se puede cargar aquí
      // const res = await fetch("/components/sidebar.html");
      // sidebar.innerHTML = await res.text();

      // O si se genera con JS dinámico, puedes dejarlo vacío y dejar que sidebar.js lo renderice
    } catch (err) {
      console.error("Error cargando sidebar:", err);
    }
  } else {
    if (sidebar) sidebar.remove();
  }

  // ✅ Finalmente, mostramos el contenido ya sin parpadeo
  body.classList.remove("preload");
});
</script>

</body>
</html>
